<%- include("../layouts/header.ejs") %>

<br><br>
 
 <!--=============================
        MENU DETAILS START
    ==============================-->
    <section class="fp__menu_details mt_115 xs_mt_85 mb_95 xs_mb_65">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-9 wow fadeInUp" data-wow-duration="1s">
                    <div class="" id="">
                        <div class="">
                            <ul class='product-images'>
                                <%products.forEach(product =>{%>
                                    
                                <li>
                                    <img id="largeImg" data-zoom-image="" class="zoom ing-fluid w-100" src="/cropped_images/<%= product.image[0] %>" alt="product">
                                </li>
                            </ul>
                        </div>
                        <div class="thumbnail-images" >
                            <%for(let i=0;i<product.image.length;i++) {%>
                            <img  class="thumbnail-img"   style="max-width: 100px;height: 100px;" src="/cropped_images/<%=product.image[i]%>" alt="">
                            <%}%>
                        </div>
                        
                    </div>
                </div>
                <div class="col-lg-7 wow fadeInUp" data-wow-duration="1s">
                    <div class="fp__menu_details_text">
                        <h2><%=product.productName%></h2>
                        
                        <p class="rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                            <i class="far fa-star"></i>
                            <span>(201)</span>
                        </p>
                        <%if(product.isOfferApplied=== true){%>
                        <h3 class="price">Rs <%=product.price%><del style="color: red;">Rs <%=product.oldPrice%></del> </h3>
                             <%} else{%>
                                <h3 class="price">Rs <%=product.price%></h3>  
                                <%}%>   
                        <p class="short_description"><%=product.description%></p>
                        <%if(product.stock<=0){%>
                         <p class="short_description" style="color: red;">Out of stock</p>
                         <%} else{%>
                        <p class="short_description" style="color: rgb(32, 238, 32); font-weight: bolder;">Instock - <%=product.stock%></p>
                            <%}%>
                        <!-- <div class="details_size">
                            <h5>select Color</h5>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="large" checked>
                                <label class="form-check-label" for="large">
                                    Red <span>+ $350</span>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="medium">
                                <label class="form-check-label" for="medium">
                                    Black<span>+ $250</span>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="small">
                                <label class="form-check-label" for="small">
                                    Blue <span>+ $150</span>
                                </label>
                            </div>
                        </div> -->

                        <!-- <div class="details_extra_item">
                            <h5>select option <span>(optional)</span></h5>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="coca-cola">
                                <label class="form-check-label" for="coca-cola">
                                    Wired <span>+ $10</span>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="7up">
                                <label class="form-check-label" for="7up">
                                    Bluetooth<span>+ $15</span>
                                </label>
                            </div>
                        </div> -->

                        <!-- <div class="details_quentity">
                            <h5>select quantity</h5>
                            <div class="quentity_btn_area d-flex flex-wrapa align-items-center">
                                <div class="quentity_btn">
                                    <button class="btn btn-danger"><i class="fal fa-minus"></i></button>
                                    <input type="text" placeholder="1">
                                    <button class="btn btn-success"><i class="fal fa-plus"></i></button>
                                </div>
                                <h3></h3>
                            </div>
                        </div> -->
                        <ul class="details_button_area d-flex flex-wrap">
                            
                            <input type="hidden" value="<%= product._id%>" name="productId">
                            <%if(product.stock>0){%> 
                            <button onclick="addToCart('<%= product._id%>')" ><a class="common_btn">add to cart</a></button>
                            <%} else {%>
                            <button  disabled><a style="background-color: red;" class="common_btn">Out Of Stock</a></button>
                            <%}%>
                        
                            <li><a class="wishlist" href="#"><i class="far fa-heart"></i></a></li>
                        </ul>
                      
                        <%})%>
                    </div>
                </div>
               
            </div>
            <!-- <div class="fp__related_menu mt_90 xs_mt_60">
                <h2>related item</h2>
                <div class="row related_product_slider">
                    <div class="col-xl-3 wow fadeInUp" data-wow-duration="1s">
                        <div class="fp__menu_item">
                            <div class="fp__menu_item_img">
                                <img src="images/menu2_img_1.jpg" alt="menu" class="img-fluid w-100">
                                <a class="category" href="#">chicken</a>
                            </div>
                            <div class="fp__menu_item_text">
                                <p class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <i class="far fa-star"></i>
                                    <span>74</span>
                                </p>
                                <a class="title" href="menu_details.html">chicken Masala</a>
                                <h5 class="price">$80.00 <del>90.00</del></h5>
                                <ul class="d-flex flex-wrap justify-content-center">
                                    <li><a href="#" data-bs-toggle="modal" data-bs-target="#cartModal"><i
                                                class="fas fa-shopping-basket"></i></a></li>
                                    <li><a href="#"><i class="fal fa-heart"></i></a></li>
                                    <li><a href="#"><i class="far fa-eye"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 wow fadeInUp" data-wow-duration="1s">
                        <div class="fp__menu_item">
                            <div class="fp__menu_item_img">
                                <img src="images/menu2_img_2.jpg" alt="menu" class="img-fluid w-100">
                                <a class="category" href="#">chicken</a>
                            </div>
                            <div class="fp__menu_item_text">
                                <p class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <i class="far fa-star"></i>
                                    <span>120</span>
                                </p>
                                <a class="title" href="menu_details.html">chicken Masala</a>
                                <h5 class="price">$80.00 <del>90.00</del></h5>
                                <ul class="d-flex flex-wrap justify-content-center">
                                    <li><a href="#" data-bs-toggle="modal" data-bs-target="#cartModal"><i
                                                class="fas fa-shopping-basket"></i></a></li>
                                    <li><a href="#"><i class="fal fa-heart"></i></a></li>
                                    <li><a href="#"><i class="far fa-eye"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 wow fadeInUp" data-wow-duration="1s">
                        <div class="fp__menu_item">
                            <div class="fp__menu_item_img">
                                <img src="images/menu2_img_3.jpg" alt="menu" class="img-fluid w-100">
                                <a class="category" href="#">Biryani</a>
                            </div>
                            <div class="fp__menu_item_text">
                                <p class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <i class="far fa-star"></i>
                                    <span>514</span>
                                </p>
                                <a class="title" href="menu_details.html">Hyderabadi biryani</a>
                                <h5 class="price">$70.00</h5>
                                <ul class="d-flex flex-wrap justify-content-center">
                                    <li><a href="#" data-bs-toggle="modal" data-bs-target="#cartModal"><i
                                                class="fas fa-shopping-basket"></i></a></li>
                                    <li><a href="#"><i class="fal fa-heart"></i></a></li>
                                    <li><a href="#"><i class="far fa-eye"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 wow fadeInUp" data-wow-duration="1s">
                        <div class="fp__menu_item">
                            <div class="fp__menu_item_img">
                                <img src="images/menu2_img_4.jpg" alt="menu" class="img-fluid w-100">
                                <a class="category" href="#">grill</a>
                            </div>
                            <div class="fp__menu_item_text">
                                <p class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <i class="far fa-star"></i>
                                    <span>25</span>
                                </p>
                                <a class="title" href="menu_details.html">daria shevtsova</a>
                                <h5 class="price">$99.00</h5>
                                <ul class="d-flex flex-wrap justify-content-center">
                                    <li><a href="#" data-bs-toggle="modal" data-bs-target="#cartModal"><i
                                                class="fas fa-shopping-basket"></i></a></li>
                                    <li><a href="#"><i class="fal fa-heart"></i></a></li>
                                    <li><a href="#"><i class="far fa-eye"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 wow fadeInUp" data-wow-duration="1s">
                        <div class="fp__menu_item">
                            <div class="fp__menu_item_img">
                                <img src="images/menu2_img_5.jpg" alt=" menu" class="img-fluid w-100">
                                <a class="category" href="#">chicken</a>
                            </div>
                            <div class="fp__menu_item_text">
                                <p class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <i class="far fa-star"></i>
                                    <span>324</span>
                                </p>
                                <a class="title" href="menu_details.html">chicken Masala</a>
                                <h5 class="price">$80.00 <del>90.00</del></h5>
                                <ul class="d-flex flex-wrap justify-content-center">
                                    <li><a href="#" data-bs-toggle="modal" data-bs-target="#cartModal"><i
                                                class="fas fa-shopping-basket"></i></a></li>
                                    <li><a href="#"><i class="fal fa-heart"></i></a></li>
                                    <li><a href="#"><i class="far fa-eye"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/3.0.8/jquery.elevatezoom.min.js"></script>

    <script>
        const addToCart= (id)=>{
            const productid = id
            fetch("/addToCart", {
                method:'post',
                headers:{
                    "Content-Type":"application/json"
                },
                body:JSON.stringify({
                    productid
                })
            })
            .then((res)=>res.json())
            .then(data=>{
                if(data.success){
                    console.log('succes');
                    window.location.href = "/myCart"
                }
            })
            .catch((error)=>console.log(error))
        }
    </script>



<script>
$(document).ready(function() {
    // Initialize ElevateZoom on the main product image
    $('#largeImg').elevateZoom({
       
        zoomType: "window", // Set zoom type to window
        cursor: "crosshair",
        scrollZoom: true,
        zoomWindowWidth: 300, // Adjust width of zoom window
        zoomWindowHeight: 300, // Adjust height of zoom window
        responsive: true // Enable responsive mode
    });

    // Handle thumbnail clicks to change the main image
    $('.thumbnail-images .thumbnail-img').on('click', function() {
        var zoomImage = $(this).attr('src');
        var zoomImageLarge = $(this).attr('data-zoom-image');
        
        // Update main product image source and data-zoom-image attribute
        $('#largeImg').attr('src', zoomImage).attr('data-zoom-image', zoomImageLarge);

         // Destroy the existing ElevateZoom instance
         $('.zoomContainer').remove();
         $('#largeImg').removeData('elevateZoom');

        // Refresh ElevateZoom after updating the image
        $('#largeImg').elevateZoom({
            zoomType: "window", // Set zoom type to window
        cursor: "crosshair",
        scrollZoom: true,
        zoomWindowWidth: 300, // Adjust width of zoom window
        zoomWindowHeight: 300, // Adjust height of zoom window
        responsive: true // Enable responsive mode"
        });
    });
});

</script>




   